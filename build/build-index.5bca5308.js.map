{"mappings":"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","sources":["dist/ui/ClientUI.js"],"sourcesContent":["const fileSystem = null;\nconst VERSION_NUMBER = \"0.8.0-ALPHA\";\n\nvar debugConsole;\ndocument.addEventListener('DOMContentLoaded', function() {\n\n    console.info(\"Version \" + VERSION_NUMBER);\n    document.getElementById(\"version\").innerHTML = VERSION_NUMBER;\n    \n    M.Modal.init(document.getElementById('menu'), {\n      \n      onOpenStart: () => IodineGUI.isPlaying && IodineGUI.Iodine.pause(),\n      onCloseEnd: () => !IodineGUI.isPlaying && IodineGUI.Iodine.playStatusCallback && IodineGUI.Iodine.play(),\n      dismissible: false\n    \n    }).open();      \n\n    initMenu();\n\n    createAndLoadConfig();\n\n     M.Autocomplete.init(document.getElementById(\"autocomplete-items\"), { limit: 4, data : Object.keys(ITEM_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}) });\n     M.Autocomplete.init(document.getElementById(\"autocomplete-locations\"), { limit: 4, data : Object.keys(KEY_LOCATION_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}), onAutocomplete : () => {\n        let locationParts = KEY_LOCATION_DATA[document.getElementById(\"autocomplete-locations\").value].split(\",\");\n        document.getElementById(\"game-value-input\").value = locationParts[0];\n        document.getElementById(\"bank-value-input\").value = locationParts[1];\n        document.getElementById(\"map-value-input\").value = locationParts[2];\n        document.getElementById(\"warp-value-input\").value = locationParts[3];\n        M.FormSelect.getInstance(document.getElementById(\"game-value-input\"))._handleSelectChangeBound();\n     }});\n     M.Autocomplete.init(document.getElementById(\"autocomplete-hints\"), { limit: 4, data : Object.fromEntries(Object.keys(PATH_FINDING_LOCATIONS).map(l => [l, null]))});\n\n    populateHints(); \n\n    M.FormSelect.init(document.querySelectorAll('select'), {});\n    debugConsole = M.Modal.init(document.getElementById('console'), {});\n\n    document.querySelectorAll(\"input[type=text]\").forEach(e => e.addEventListener('focusin', (event) => userInputEnabled = false));\n    document.querySelectorAll(\"input[type=text]\").forEach(e => e.addEventListener('focusout', (event) => userInputEnabled = true));\n\n    let sidebar = document.querySelectorAll('.sidenav');\n    M.Sidenav.init(sidebar, {});\n});\n\nfunction toggleSidebar() {\n  let sidebar = M.Sidenav.getInstance(document.getElementById(\"slide-out\"))\n  if (sidebar.isOpen) {\n    sidebar.close()\n  } else {\n    sidebar.open()\n  }\n}\n\nCommandExecutor.register(\"toggleRouteFinder\", args => toggleSidebar());\n\n\nfunction debounce(func, timeout = 300){\n    let timer;\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => { func.apply(this, args); }, timeout);\n    };\n}\n\nfunction initMenu() {\n  M.Carousel.init(document.querySelectorAll('.carousel'), { numVisible: 5, dist: -20, noWrap: true, preventLoop: true, enableTouch: false, duration: 30});\n\n  document.querySelectorAll(\".carousel-item\").forEach(e => e.setAttribute(\"draggable\", false));\n  document.querySelectorAll(\".left-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).prev());\n  document.querySelectorAll(\".right-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).next());\n}\n\nwindow.addEventListener('resize', initMenu, true);\n\nfunction toggleMenu() {\n  let menu = M.Modal.getInstance(document.getElementById('menu'));\n  menu.isOpen ? menu.close() : menu.open();\n}\n\nasync function createAndLoadConfig() {\n\n  if(fileSystem) {\n    fileSystem.readTextFile(DEFAULT_KEYBIND_CONFIG_PATH, {dir: fileSystem.BaseDirectory.App}).then(initKeybinds, e => {\n      initKeybinds(DEFAULT_KEYBIND_CONFIG);\n\n      fileSystem.createDir(fileToDirPath(DEFAULT_KEYBIND_CONFIG_PATH), { dir: fileSystem.BaseDirectory.App, recursive: true })\n      .then(fileSystem.writeTextFile(DEFAULT_KEYBIND_CONFIG_PATH, DEFAULT_KEYBIND_CONFIG, { dir: fileSystem.BaseDirectory.App }));\n    });\n  } else {\n    storageManager.find(\"keybinds\").then(initKeybinds, e => {\n      initKeybinds(DEFAULT_KEYBIND_CONFIG);\n      storageManager.persist(keybinds, DEFAULT_KEYBIND_CONFIG);\n    })\n  }\n}\n\nfunction fileToDirPath(path) {\n  return path.slice(0, path.lastIndexOf(\"/\"));\n}\n\n/* CONTROLS */\n\n\ndocument.addEventListener('keydown', e => doInput(e.code, true, false));\ndocument.addEventListener('keyup', e => doInput(e.code, false, false));\n\nCommandExecutor.register(\"toggleMenu\", args => toggleMenu());\n\nlet keybinds = new Map();\nfunction initKeybinds(conf) {\n\n  conf = JSON.parse(conf);\n\n  let table = document.getElementById(\"key-binding-table\");\n\n  conf.sort(sortCommands)\n  conf.forEach(binding => {\n    if (binding.type == \"exec\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command);\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command);\n    }\n    else if (binding.type == \"button\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command + \"Down\");\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Up\"  , binding.command + \"Up\"  );\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command + \"Down\");\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Up\"  , binding.command + \"Up\"  );\n    }\n\n    let row = table.insertRow(table.rows.length);\n\n    let keyCell = row.insertCell(0);\n    keyCell.innerHTML = `<td>&nbsp;${binding.command.replace(\"Key\", \"\")}</td>`;\n\n    let kbdCell = row.insertCell(1);\n    kbdCell.innerHTML = `<td>&nbsp;<span>${binding.kbd.replace(\"Key\", \"\") || \"N/A\"}</span></td>`;\n    kbdCell.setAttribute(\"data-command\", binding.command);\n    kbdCell.setAttribute(\"data-type\", binding.type);\n    kbdCell.addEventListener(\"click\", listenForKbdBinding)\n\n    let gmpdCell = row.insertCell(2);\n    gmpdCell.innerHTML = `<td>&nbsp;<span>${binding.gmpd || \"N/A\"}</span></td>`;\n    gmpdCell.setAttribute(\"data-command\", binding.command);\n    gmpdCell.setAttribute(\"data-type\", binding.type);\n    gmpdCell.addEventListener(\"click\", listenForGmpdBinding);\n  });\n}\n\nlet listenFor = false;\n\nfunction listenForKbdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: false, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any key...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nfunction listenForGmpdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: true, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any button...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nvar userInputEnabled = true;\nfunction doInput(code, isDown, isGamepad) {\n\n  if (!userInputEnabled) { return; }\n  //if (code == \"Slash\") { debugConsole.open(); return; }\n\n  if (listenFor && !listenFor.isGamepad && !isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"KBD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"KBD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"KBD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code.replace(\"Key\", \"\")}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else if (listenFor && listenFor.isGamepad && isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"GMPD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"GMPD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"GMPD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else {\n\n    code = \"\" + (isGamepad ? \"GMPD-\" : \"KBD-\") + code + (isDown ? \"-Down\" : \"-Up\");\n    keybinds.get(code) && CommandExecutor.execute(keybinds.get(code));\n\n  }\n\n}\n\nfunction writeKeybinds() {\n\n  let config = [];\n\n  new Set([...keybinds.values()].filter(v => !v.includes(\"KeyUp\"))).forEach(c => {\n\n    let keybind = {};\n\n    let isButton = c.includes(\"Down\") && [...keybinds].filter(([k,v]) => v == c.replace(\"Down\", \"Up\") > 0);\n    keybind.type = isButton ? \"button\" : \"exec\";\n\n    keybind.command = isButton ? c.replace(/KeyDown$/, \"Key\") : c;\n\n    keybind.kbd = null;\n    keybind.gmpd = null;\n    [...keybinds].filter(([k,v]) => v == c).forEach(m => keybind[m[0].includes(\"KBD\") ? \"kbd\" : \"gmpd\"] = m[0].match(/-(.*)-/).pop());\n\n    config.push(keybind);\n\n  });\n  \n  config.sort(sortCommands)\n  let printPrettyJson = JSON.stringify(config, null, 2).replace(/([\\\"|(null)|\\{],?)\\n/g, \"$1\");\n\n  if (fileSystem) {\n    fileSystem.writeTextFile(DEFAULT_KEYBIND_CONFIG_PATH, printPrettyJson, { dir: fileSystem.BaseDirectory.App })\n  } else {\n    storageManager.persist(\"keybinds\", printPrettyJson);\n  }\n  \n}\n\nfunction sortCommands(a,b) {\n  return (a.type + commandToIndex(a.command) > b.type + commandToIndex(b.command)) ? 1: -1;\n}\n\nfunction commandToIndex(c) {\n  switch(c) {\n    case \"AKey\"      : return 0;\n    case \"BKey\"      : return 1;\n    case \"LKey\"      : return 2;\n    case \"RKey\"      : return 3;\n    case \"StartKey\"  : return 4;\n    case \"SelectKey\" : return 5;\n    case \"UpKey\"     : return 6;\n    case \"DownKey\"   : return 7;\n    case \"LeftKey\"   : return 8;\n    case \"RightKey\"  : return 9;\n    case \"SpeedUp\"   : return 10;\n    case \"Restart\"   : return 11;\n    case \"toggleMenu\": return 12;\n    default: return 999;\n  }\n}\n\nfunction menuInput(c) {\n  switch(c) {\n    case \"A\"      : \n    break;\n    case \"B\"      : \n    break;\n    case \"L\"      :\n      M.Carousel.getInstance(document.getElementById('menuCarousel')).prev();\n    break;\n    case \"R\"      : \n      M.Carousel.getInstance(document.getElementById('menuCarousel')).next();\n    break;\n    case \"START\"  : \n    break;\n    case \"SELECT\" : \n    break;\n    case \"UP\"     : \n    break;\n    case \"DOWN\"   : \n    break;\n    case \"LEFT\"   : \n    break;\n    case \"RIGHT\"  : \n    break;\n  }\n}\n\nlet freezeClic = false; \ndocument.addEventListener(\"click\", e => {\n    if (freezeClic) {\n        M.Toast.dismissAll();\n        e.stopPropagation();\n        e.preventDefault();\n    }\n}, true);\n\n/* Hints */\nfunction populateHints() {\n  let table = document.getElementById(\"hint-table\");\n  Object.entries(HINTABLE_LOCATIONS).forEach(e => {\n    let row = table.insertRow(table.rows.length);\n\n    let nameCell = row.insertCell(0);\n    nameCell.innerHTML = `<td>&nbsp;${e[0]}</td>`;\n\n    let buttonCell = row.insertCell(1);\n    buttonCell.innerHTML = `<td>&nbsp;<span>Show Hint</span></td>`;\n    buttonCell.setAttribute(\"data-location\", e[1]);\n    buttonCell.setAttribute(\"data-target\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    buttonCell.addEventListener(\"click\", displayHint)\n\n    let hintCell = row.insertCell(2);\n    hintCell.setAttribute(\"id\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    hintCell.innerHTML = `<td>&nbsp;...</td>`;\n  })\n}\n\nfunction displayHint(e) {\n  let target = document.getElementById(e.currentTarget.getAttribute(\"data-target\"));\n  let hint = getHint(e.currentTarget.getAttribute(\"data-location\"));\n  target.innerHTML = hint;\n}\n\ndocument.addEventListener('swiped-down', e => {\n  console.log(e.detail.yEnd - e.detail.yStart)\n  if (e.detail.yEnd - e.detail.yStart > 250) { \n    toggleMenu()\n  }\n});\n\n/* Route Finding */\nfunction searchRoute() {\n  document.getElementById(\"searchRouteFinder\").innerHTML = \"<span>PROCESSING</span>\"\n  // Ensure the netowrk has been generated before we search it\n  if (typeof cy === 'undefined') {\n    let seed = document.getElementById(\"input_seed_text\").value;\n    setTimeout(() => {\n      mapWarps(seed).then(searchRouteAux());\n    }, 50);\n  } else {\n    searchRouteAux();\n  }\n} \n\nfunction searchRouteAux() {\n\n  let location = document.getElementById(\"autocomplete-hints\").value;\n  let result = shortestPath(location);\n\n  let flagsElement = document.getElementById(\"route-finder-flags\");\n  flagsElement.innerHTML = '';\n\n  if (result.flags.size == 0) {\n    flagsElement.appendChild(createFlagItem(\"NONE\"))\n  } else {\n    result.flags.forEach(f => flagsElement.appendChild(createFlagItem(f)));\n  }\n\n  let routeElement = document.getElementById(\"route-finder-route\");\n  routeElement.innerHTML = '';\n\n  result.route.forEach(r => routeElement.appendChild(createRouteItem(r)));\n\n  document.getElementById(\"searchRouteFinder\").innerHTML = \"<span>SEARCH</span>\"\n}\n\nfunction createFlagItem (name) {\n  let element = document.createElement(\"li\");\n  element.innerHTML = name;\n  return element;\n}\n\nfunction createRouteItem(name) {\n\n  if (name.substring(0,4) == \"WALK\") {\n    let element = document.createElement(\"div\");\n    element.innerHTML = \"WALK TO\" + \" \" + name.slice(4);\n    element.setAttribute(\"class\", \"walk-to\")\n    return element;\n  } else if (name.substring(0,4) == \"WARP\") {\n    let element = document.createElement(\"div\");\n    element.innerHTML = \"WARP TO\" + \" \" + name.slice(4);\n    element.setAttribute(\"class\", \"warp-to\")\n    return element;\n  }\n\n\n  let element = document.createElement(\"li\");\n  let nameParts = name.split(\"-\").map(p => p.trim());\n  element.innerHTML = nameParts[0] + \" - \" + nameParts[1] + \"<br/>\" + nameParts[2];\n  return element;\n}"],"names":["fileSystem","VERSION_NUMBER","debugConsole","toggleSidebar","sidebar","M","Sidenav","getInstance","document","getElementById","isOpen","close","open","debounce","func","timeout","timer","args","clearTimeout","setTimeout","apply","this","initMenu","Carousel","init","querySelectorAll","numVisible","dist","noWrap","preventLoop","enableTouch","duration","forEach","e","setAttribute","onclick","prev","next","toggleMenu","menu","Modal","async","createAndLoadConfig","storageManager","find","then","initKeybinds","DEFAULT_KEYBIND_CONFIG","persist","keybinds","fileToDirPath","path","slice","lastIndexOf","addEventListener","console","info","innerHTML","onOpenStart","IodineGUI","isPlaying","Iodine","pause","onCloseEnd","playStatusCallback","play","dismissible","Autocomplete","limit","data","Object","keys","ITEM_DATA","reduce","v1","v2","KEY_LOCATION_DATA","onAutocomplete","locationParts","value","split","FormSelect","_handleSelectChangeBound","fromEntries","PATH_FINDING_LOCATIONS","map","l","populateHints","event","userInputEnabled","CommandExecutor","register","window","doInput","code","Map","conf","JSON","parse","table","sort","sortCommands","binding","type","kbd","set","command","gmpd","row","insertRow","rows","length","insertCell","replace","kbdCell","listenForKbdBinding","gmpdCell","listenForGmpdBinding","listenFor","Toast","dismissAll","isGamepad","currentTarget","getAttribute","elmnt","oldCode","querySelector","toast","html","displayLength","completeCallback","freezeClic","isDown","delete","writeKeybinds","get","execute","config","Set","values","filter","v","includes","c","keybind","isButton","k","m","match","pop","push","printPrettyJson","stringify","a","b","commandToIndex","menuInput","entries","HINTABLE_LOCATIONS","buttonCell","replaceAll","displayHint","hintCell","target","hint","getHint","searchRoute","cy","seed","mapWarps","searchRouteAux","location","result","shortestPath","flagsElement","flags","size","appendChild","createFlagItem","f","routeElement","route","r","createRouteItem","name","element","createElement","substring","element1","element2","nameParts","p","trim","stopPropagation","preventDefault","log","detail","yEnd","yStart"],"version":3,"file":"build-index.5bca5308.js.map"}